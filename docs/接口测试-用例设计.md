# 接口测试用例设计功能点

## 针对场景设计

### 1、正常场景

根据业务需求，查看接口是否满足正常场景需求功能

示例查询订单接口的功能点

- 是否登录（有无token）查询订单1.登录（有token）查询订单，正常该返回用户订单
    
    2.未登录（无token）查询订单，提示未登录
- 有时间条件下，是否正常返回时间内订单
    
    1.查询当天订单，返回当天订单
    
    2.查询当月订单，返回当月订单
- 只查询待发货的订单
    
    1.查询订单，只返回待发货订单
    
    2.订单发货，不返回发货的订单

\-

### 2、异常场景

异常状态、异常场景时请求接口

示例查询订单接口的功能点

- 同一账号，不同角色上的订单，是否正常返回1.采购商A、采购商B都下单，查询采购商A订单，只返回采购商A订单
- 开始时间大于结束时间查询订单
- 时间传入非时间格式查询订单

\-

## 针对输入设计

### 1、请求方式

1. 正确的请求方式
2. 错误的请求方式

### 2、入参

#### 2.1 参数类型

常见参数类型有: - 数值型(int、long、float、double等） - 字符串类型 - 数组或链表 - 结构体：结构体(struct)是一些元素的结合，元素实际也是数值型，字符串型，数组或链表。 1. 正确的参数类型 2. 错误的参数类型

#### 2.2 必填项

1. 正常填写参数
2. 参数为空
3. 参数为null

#### 2.3 字符类型大小

1. 大于参数的规定的大小
2. 小于参数的规定的大小
3. 等于参数的规定的大小

#### 2.4 参数名称

1. 存在的参数名称
2. 不存在的参数名称

## 针对逻辑设计

接口需要进行一些逻辑处理的，那么按逻辑设计用例可以从以下几个角度分析。

### 1、 约束条件分析

常见的约束条件： - 数值限制：分数限制、金币限制、等级限制、时间限制等等。（例如：兑换Q币活动要求积分>50才可参与。） - 状态限制：登录状态等。（例如：同步用户信息需要先登录账号。） - 关系限制：绑定的关系，好友关系等。（例如：帮家人防骗功能只能查询绑定家人的来电信息。） - 权限限制：管理员等。 -

- 它的意义在于：
    - 用户进行操作时，在该操作的前端可能已经进行了约束条件的限制，故用户无法直接触发请求该接口。
    - 但是实际上，在其他情况下，例如UI有bug或者6到另一个状态。如果我们打乱了这个次序，**从一个状态切换到另一个不在它下一状态集中的状态，那么逻辑将会打乱，就会出现逻辑问题**。

- 它的意义在于：
    - 可通过特殊手段达到原本不能的状态，从而谋取利益
        - info 设计举例 点击展开
- 确认支付结果接口，应该只用于已支付的订单，别的订单状态不能进行确认：
    - 正常流程，待支付-支付-确认支付结果
    - 异常流程，待支付-确认支付结果（通过确认支付结果接口，未支付，直接生成订单）

\-

## 针对输出设计

针对输出设计其实是针对接口返回的结果进行分析。

### 1、针对输出结果

接口处理正确的结果可能只有一个，但是错误异常返回结果有很多情况很多值。如果知道返回结果有很多种，就可以针对不同结果设计用例。

- 设计举例
    
    点击展开
    
- 同步发货接口的正确和错误返回结果。
    - 发货成功，状态码：1000
    - 时间格式不对，发货失败情况
        
        ```
        {
          "code": 1102,
          "message": "日期格式必须为yyyy-MM-dd",
          "data": null,
          "time": 1662458860760
        }
        ```
        
    - 订单不存在之类，接口返回定义的返回码可以设计更多用例

\-

### 2、接口超时

接口正常情况下是有返回的，但如果接口不返回呢？也就是说**接口超时后的处理也是测试需要考虑的部分**。

- 常见的问题：
    - 如果超时处理不当，可能未进行超时处理，导致整个流程阻塞
    - 如果超时处理不当，可能超时后又收到接口返回，导致逻辑出现错乱
